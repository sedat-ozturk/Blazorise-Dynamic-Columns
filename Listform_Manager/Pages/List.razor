@page "/List/{Id}"

@using Listform_Manager.Entities
@using Listform_Manager.Localization
@using Listform_Manager.Services.AppService
@using Listform_Manager.Services.Dtos
@using Volo.Abp.Application.Dtos
@using Microsoft.Extensions.Localization
@using Volo.Abp.Domain.Repositories
@inject IStringLocalizer<Listform_ManagerResource> L
@inherits AbpCrudPageBase<IProductService, ProductDto, int, PagedAndSortedResultRequestDto, CreateUpdateProductDto>

<Card>
    <CardHeader>
        <h2>@L["Menu:Lists:Products"]</h2>
    </CardHeader>
    <CardBody>
        @if (CurrentUser.UserName != null)
        {
            <DataGrid TItem="ProductDto"
                      Data="Entities"
                      ReadData="OnDataGridReadAsync"
                      TotalItems="TotalCount"
                      ShowPager="true"
                      PageSize="PageSize">
                <DataGridColumns>
                    @if (Listform_Fields != null)
                        {
                            @foreach (var Field in Listform_Fields)
                            {
                                <DataGridColumn TItem="ProductDto"
                                                Field="@Field.FieldName"
                                                Caption="@L[Field.Caption]">
                                </DataGridColumn>
                            }
                        }
                </DataGridColumns>
            </DataGrid>
        }
        else
        {
            <p><em>@L["Error:PleaseLogin"]</em></p>
        }
    </CardBody>
</Card>